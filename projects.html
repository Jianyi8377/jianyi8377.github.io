---
layout: default
title: 项目分享
---

<style>
  /* --- 基础与重置样式 --- */
  * {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }

  body {
    margin: 0;
    padding: 20px 0;
    color: #333;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    line-height: 1.6;
    background-color: #f5f7fa; /* 默认背景色 */
  }

  /* --- 背景样式 --- */
  #bg-video {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    object-fit: cover;
    z-index: -1;
    pointer-events: none;
    opacity: 0; /* 初始不可见 */
    transition: opacity 0.8s ease;
  }

  /* 背景图占位样式 */
  .bg-placeholder {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    z-index: -2;
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    transition: opacity 0.8s ease;
  }

  /* --- 返回首页按钮 --- */
  .back-to-home {
    position: fixed;
    top: 20px;
    left: 20px;
    z-index: 1000;
  }

  .home-btn {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 10px 18px;
    background: rgba(255, 255, 255, 0.9);
    border: none;
    border-radius: 25px;
    color: #3498db;
    font-size: 16px;
    font-weight: 500;
    text-decoration: none;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    transition: all 0.3s;
    cursor: pointer;
  }

  .home-btn:hover {
    background: rgba(255, 255, 255, 1);
    transform: translateX(-5px);
    box-shadow: 0 4px 15px rgba(0,0,0,0.15);
  }

  /* --- 内容容器样式 --- */
  .container {
    max-width: 800px;
    width: 90%;
    margin: 20px auto;
    padding: 30px;
    background-color: rgba(255, 255, 255, 0.15);
    -webkit-backdrop-filter: blur(10px);
    border-radius: 12px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
  }

  /* --- 标题样式优化 --- */
  h1 {
    color: transparent;
    text-align: center;
    margin-bottom: 30px;
    font-size: 2.5em;
    font-weight: 900;
    font-family: 'Exo 2', 'Microsoft YaHei', sans-serif;
    position: relative;
    
    /* 全息投影效果 */
    background: linear-gradient(
      90deg,
      rgba(255,0,255,0.8) 0%,
      rgba(0,255,255,0.8) 25%,
      rgba(255,255,0,0.8) 50%,
      rgba(0,255,0,0.8) 75%,
      rgba(255,0,255,0.8) 100%
    );
    -webkit-background-clip: text;
    background-clip: text;
    background-size: 400% 100%;
    
    /* 3D效果 */
    text-shadow: 
      0 1px 0 #ccc,
      0 2px 0 #c9c9c9,
      0 3px 0 #bbb,
      0 4px 0 #b9b9b9,
      0 5px 0 #aaa,
      0 6px 1px rgba(0,0,0,.1),
      0 0 5px rgba(0,0,0,.1),
      0 1px 3px rgba(0,0,0,.3),
      0 3px 5px rgba(0,0,0,.2),
      0 5px 10px rgba(0,0,0,.25),
      0 10px 10px rgba(0,0,0,.2),
      0 20px 20px rgba(0,0,0,.15);
    
    animation: hologramMove 4s linear infinite, colorShift 8s linear infinite;
    transform-style: preserve-3d;
    perspective: 1000px;
  }

  @keyframes hologramMove {
    0% {
      transform: rotateX(5deg) rotateY(0deg);
      background-position: 0% 50%;
    }
    25% {
      transform: rotateX(8deg) rotateY(5deg);
    }
    50% {
      transform: rotateX(5deg) rotateY(10deg);
      background-position: 100% 50%;
    }
    75% {
      transform: rotateX(2deg) rotateY(5deg);
    }
    100% {
      transform: rotateX(5deg) rotateY(0deg);
      background-position: 0% 50%;
    }
  }

  @keyframes colorShift {
    0% { filter: hue-rotate(0deg); }
    100% { filter: hue-rotate(360deg); }
  }

  /* 扫描线效果 */
  h1::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(
      transparent 0%,
      rgba(0, 255, 255, 0.1) 50%,
      transparent 100%
    );
    animation: scanLine 2s linear infinite;
  }

  @keyframes scanLine {
    0% { transform: translateY(-100%); }
    100% { transform: translateY(200%); }
  }

  h2 {
    color: #34495e;
    border-left: 4px solid #3498db;
    padding-left: 15px;
    margin-top: 30px;
    margin-bottom: 15px;
    font-size: 1.5em;
  }

  /* --- 分割线样式 --- */
  hr {
    border: none;
    height: 1px;
    background: linear-gradient(to right, transparent, #ccc, transparent);
    margin: 25px 0;
  }

  /* --- 文章列表样式 --- */
  .post-list {
    list-style: none;
    padding-left: 0;
  }

  .post-list li {
    margin-bottom: 15px;
    padding-bottom: 15px;
    border-bottom: 1px solid #eee;
    display: flex;
    flex-direction: column;
  }

  .post-list a {
    font-size: 1.1em;
    color: #2980b9;
    text-decoration: none;
    font-weight: 500;
    margin-bottom: 5px;
  }

  .post-list a:hover {
    color: #e74c3c;
    text-decoration: underline;
  }

  .post-list small {
    color: #7f8c8d;
    font-size: 0.9em;
  }

  /* --- 响应式设计（手机端优化） --- */
  @media (max-width: 768px) {
    body {
      padding: 10px 0;
    }

    .container {
      padding: 20px 15px;
      width: 95%;
      margin: 10px auto;
      background-color: rgba(255, 255, 255, 0.15);
    }

    h1 {
      font-size: 1.8em;
    }

    h2 {
      font-size: 1.3em;
    }

    .post-list a {
      font-size: 1em;
    }

    .back-to-home {
      top: 10px;
      left: 10px;
    }

    .home-btn {
      padding: 8px 14px;
      font-size: 14px;
    }
  }

  @media (max-width: 480px) {
    h1 {
      font-size: 1.5em;
    }

    .post-list li {
      padding-bottom: 12px;
    }
  }
</style>

<!-- 背景图占位符（初始显示） -->
<div class="bg-placeholder" id="bg-placeholder"></div>

<!-- MP4 视频背景 - 移动端使用 5.mp4，电脑端使用 2.mp4 -->
<video id="bg-video" muted playsinline preload="auto" loop>
  <!-- 移动端用 5.mp4（屏幕宽度 ≤ 768px） -->
  <source src="./videos/5.mp4" media="(max-width: 768px)" type="video/mp4">
  <!-- 电脑端用 2.mp4（屏幕宽度 ≥ 769px） -->
  <source src="./videos/2.mp4" media="(min-width: 769px)" type="video/mp4">
  <!-- 默认用 2.mp4（兼容不支持 media 属性的旧浏览器） -->
  <source src="./videos/2.mp4" type="video/mp4">
  您的浏览器不支持 HTML5 视频播放。
</video>

<!-- 返回首页按钮 -->
<div class="back-to-home">
  <a href="/" class="home-btn">
    ← 返回首页
  </a>
</div>

<div class="container">
  <h1>今朝键指叠云处</h1>
  <hr>

  <!-- 只显示技术文章 -->
  <h2>最新创作</h2>
  <ul class="post-list">
    {% assign tech_posts = site.posts | where: "categories", "program" %}
    {% for post in tech_posts %}
      <li>
        <a href="{{ post.url }}">{{ post.title }}</a>
        <small>{{ post.date | date: "%Y-%m-%d" }}</small>
      </li>
    {% endfor %}
  </ul>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const video = document.getElementById('bg-video');
    const placeholder = document.getElementById('bg-placeholder');
    
    // 检测设备类型，设置初始背景图
    const isMobile = window.innerWidth <= 768;
    if (isMobile) {
      // 移动端使用 1.jpg
      placeholder.style.backgroundImage = "url('./images/1.jpg')";
    } else {
      // 电脑端使用 3.jpg
      placeholder.style.backgroundImage = "url('./images/3.jpg')";
    }
    
    // 设置视频属性
    video.muted = true;
    video.playsInline = true;
    video.setAttribute('preload', 'auto');
    
    // 视频加载状态跟踪
    let videoLoaded = false;
    let videoStarted = false;
    let checkInterval;
    let videoDuration = 0;
    
    // 检查视频是否完全缓冲
    function checkFullyBuffered() {
      if (!videoDuration || videoDuration <= 0) {
        console.log('视频时长未知，等待元数据...');
        return false;
      }
      
      if (!video.buffered || video.buffered.length === 0) {
        console.log('视频暂无缓冲数据');
        return false;
      }
      
      // 获取视频总缓冲长度
      let totalBuffered = 0;
      for (let i = 0; i < video.buffered.length; i++) {
        totalBuffered += video.buffered.end(i) - video.buffered.start(i);
      }
      
      console.log(`视频缓冲检查: 总时长 ${videoDuration.toFixed(2)}秒, 已缓冲 ${totalBuffered.toFixed(2)}秒`);
      
      // 检查是否完全缓冲（缓冲时长 >= 视频时长）
      if (totalBuffered >= videoDuration) {
        console.log('视频已完全缓冲');
        return true;
      }
      
      // 检查是否有连续的缓冲覆盖整个视频
      let lastBufferedEnd = 0;
      for (let i = 0; i < video.buffered.length; i++) {
        const start = video.buffered.start(i);
        const end = video.buffered.end(i);
        
        // 检查是否有从0开始的连续缓冲
        if (i === 0 && start <= 0 && end >= videoDuration) {
          console.log('视频有从0开始的完整缓冲');
          return true;
        }
        
        // 检查是否有覆盖整个视频范围的缓冲
        if (start <= 0 && end >= videoDuration) {
          console.log('视频有覆盖整个时长的缓冲');
          return true;
        }
        
        lastBufferedEnd = Math.max(lastBufferedEnd, end);
      }
      
      // 如果最后一个缓冲段覆盖到了视频结束
      if (lastBufferedEnd >= videoDuration) {
        console.log('最后一个缓冲段覆盖到视频结束');
        return true;
      }
      
      return false;
    }
    
    // 定期检查视频缓冲状态
    function checkVideoBufferStatus() {
      if (videoLoaded || videoStarted) {
        if (checkInterval) {
          clearInterval(checkInterval);
        }
        return;
      }
      
      console.log('定期检查视频缓冲状态...');
      
      if (checkFullyBuffered()) {
        console.log('检测到视频已完全缓冲，准备播放');
        onVideoLoaded();
      }
    }
    
    // 视频加载成功回调
    function onVideoLoaded() {
      console.log('视频已完全缓冲，准备播放');
      videoLoaded = true;
      
      // 清除检查间隔
      if (checkInterval) {
        clearInterval(checkInterval);
      }
      
      // 尝试播放视频
      tryStartVideo();
    }
    
    // 尝试播放视频
    function tryStartVideo() {
      if (!videoLoaded || videoStarted) return;
      
      video.play()
        .then(() => {
          console.log('视频播放成功');
          videoStarted = true;
          
          // 延迟切换，确保视频流畅播放
          setTimeout(() => {
            // 显示视频，淡出背景图
            video.style.opacity = '1';
            placeholder.style.opacity = '0';
            
            // 淡出完成后隐藏占位图
            setTimeout(() => {
              placeholder.style.display = 'none';
            }, 1000);
          }, 300);
        })
        .catch(error => {
          console.log('视频播放被阻止:', error);
          
          // 添加用户交互监听
          const startOnInteraction = function() {
            video.play()
              .then(() => {
                console.log('通过用户交互播放成功');
                videoStarted = true;
                
                // 显示视频，淡出背景图
                video.style.opacity = '1';
                placeholder.style.opacity = '0';
                
                setTimeout(() => {
                  placeholder.style.display = 'none';
                }, 1000);
              })
              .catch(e => console.log('用户交互后播放仍失败:', e));
            
            // 移除监听器
            document.removeEventListener('click', startOnInteraction);
            document.removeEventListener('touchstart', startOnInteraction);
          };
          
          document.addEventListener('click', startOnInteraction);
          document.addEventListener('touchstart', startOnInteraction);
        });
    }
    
    // 获取视频时长
    function getVideoDuration() {
      if (video.duration && video.duration > 0) {
        videoDuration = video.duration;
        console.log('获取到视频时长:', videoDuration.toFixed(2), '秒');
      }
    }
    
    // 监听视频加载事件
    video.addEventListener('loadedmetadata', function() {
      console.log('视频元数据加载完成');
      getVideoDuration();
    });
    
    video.addEventListener('loadeddata', function() {
      console.log('视频数据已加载');
      getVideoDuration();
    });
    
    video.addEventListener('canplay', function() {
      console.log('视频可以播放');
      // 不在这里触发播放，等待完全缓冲
    });
    
    video.addEventListener('canplaythrough', function() {
      console.log('视频可以流畅播放到结束');
      // 不在这里触发播放，等待完全缓冲
    });
    
    video.addEventListener('progress', function() {
      // 每次缓冲进度更新时检查
      if (!videoLoaded && !videoStarted) {
        checkVideoBufferStatus();
      }
    });
    
    // 检查视频是否已缓存
    if (video.readyState >= 3) { // HAVE_FUTURE_DATA
      setTimeout(function() {
        getVideoDuration();
        // 立即检查是否已完全缓冲
        if (checkFullyBuffered()) {
          onVideoLoaded();
        }
      }, 100);
    }
    
    // 启动定期检查（每3秒检查一次）
    checkInterval = setInterval(checkVideoBufferStatus, 3000);
    
    // 30秒后停止检查（如果视频需要很长时间缓冲）
    setTimeout(() => {
      if (checkInterval) {
        clearInterval(checkInterval);
        console.log('30秒后停止缓冲检查');
        
        if (!videoLoaded && !videoStarted) {
          console.log('视频缓冲超时，保持背景图显示');
        }
      }
    }, 30000);
    
    // 监听窗口大小变化，重新设置背景图
    window.addEventListener('resize', function() {
      const nowMobile = window.innerWidth <= 768;
      
      if (videoStarted) {
        // 如果视频已经在播放，重新加载视频源
        video.load();
        video.play().catch(e => console.log('切换尺寸后播放失败'));
      } else {
        // 如果视频还没开始播放，更新背景图
        if (nowMobile !== isMobile) {
          if (nowMobile) {
            placeholder.style.backgroundImage = "url('./images/1.jpg')";
          } else {
            placeholder.style.backgroundImage = "url('./images/3.jpg')";
          }
        }
      }
    });
    
    // 页面可见性变化处理
    document.addEventListener('visibilitychange', function() {
      if (!document.hidden && videoStarted) {
        video.play().catch(e => console.log('恢复播放失败'));
      }
    });
    
    // 错误处理
    video.addEventListener('error', function(e) {
      console.error('视频加载错误:', e);
      // 保持背景图显示
      
      // 清除检查间隔
      if (checkInterval) {
        clearInterval(checkInterval);
      }
    });
    
    // 立即开始加载视频
    video.load();
  });
</script>